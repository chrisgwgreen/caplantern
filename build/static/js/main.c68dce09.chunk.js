(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(29)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(11),s=n.n(o);n(19),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,c=[],l=function(e){c.push(e)},h=function(){clearTimeout(r),r=setTimeout(function(){c.forEach(function(e){window.requestAnimationFrame(function(){return e()})})},200)},d=n(3),u=n(4),m=n(6),p=n(5),v=n(7),g=(n(20),n(1)),f=n(2),b=n(12),w=n.n(b),y=n(8),E=n.n(y);n(21);var M=function(e){var t=e.setColour,n=e.colour,a=e.isSelected;return i.a.createElement("div",{className:E()("colour-button","colour-button__colour--".concat(n),{"colour-button--selected":a}),"data-colour":n,onClick:function(){return t(n)}})},O={blue:1677515,green:1363040,yellow:15781139,red:15481911,black:0},k={screw:{stl:"./stl/screw.stl",material:new f.MeshPhongMaterial({specular:1118481,shininess:200,opacity:.7,transparent:!0}),y:.54,isEditable:!1},body:{stl:"./stl/body.stl",material:new f.MeshPhongMaterial({color:O.green,specular:1118481,shininess:200}),isEditable:!0,colour:"green"},switch:{stl:"./stl/switch.stl",material:new f.MeshPhongMaterial({color:O.yellow,specular:1118481,shininess:200}),isEditable:!0,colour:"yellow"},handle1:{stl:"./stl/handle.stl",material:new f.MeshPhongMaterial({color:O.yellow,specular:1118481,shininess:200}),isEditable:!0,colour:"yellow"},handle2:{stl:"./stl/handle.stl",material:new f.MeshPhongMaterial({color:O.yellow,specular:1118481,shininess:200}),isEditable:!0,colour:"yellow",rotationY:Math.PI}},j=(n(22),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.setColour,n=e.isColourSelectorVisible,a=e.selectedColour;return i.a.createElement("aside",{className:E()("colour-selector",{"colour-selector--enabled":n})},i.a.createElement("div",{className:"colour-selector--container"},Object.keys(O).map(function(e){return i.a.createElement(M,{key:"colour-".concat(e),colour:e,setColour:t,isSelected:e===a})})))}}]),t}(a.Component));n(23);var S=function(e){var t=e.onAnimateHandle;return i.a.createElement("button",{className:E()("animate-stand"),onClick:function(){return t()}},"Animate stand")},x=(n(24),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={isColourSelectorVisible:!1,isStandOpen:!1,selectedColour:null,selectedElementId:null,isMoved:!1,isHandlesOpen:!1,isAnimatingHandles:!1},n.isTicking=!1,n.lastX=0,n.renderScene=function(){n.renderer.render(n.scene,n.camera),n.isTicking=!1},n.onMouseUp=n.onMouseUp.bind(Object(g.a)(Object(g.a)(n))),n.onActionMove=n.onActionMove.bind(Object(g.a)(Object(g.a)(n))),n.onMouseDown=n.onMouseDown.bind(Object(g.a)(Object(g.a)(n))),n.onActionStart=n.onActionStart.bind(Object(g.a)(Object(g.a)(n))),n.onActionEnd=n.onActionEnd.bind(Object(g.a)(Object(g.a)(n))),n.addEventListeners=n.addEventListeners.bind(Object(g.a)(Object(g.a)(n))),n.removeEventListeners=n.removeEventListeners.bind(Object(g.a)(Object(g.a)(n))),n.onWindowResize=n.onWindowResize.bind(Object(g.a)(Object(g.a)(n))),n.setColour=n.setColour.bind(Object(g.a)(Object(g.a)(n))),n.onAnimateHandle=n.onAnimateHandle.bind(Object(g.a)(Object(g.a)(n))),n}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.mount.clientWidth,n=this.mount.clientHeight;this.top=this.mount.offsetTop,this.left=this.mount.offsetLeft,this.height=n,this.width=t,this.scene=new f.Scene,this.camera=new f.PerspectiveCamera(35,t/n,1,15),this.scene=new f.Scene,this.scene.background=new f.Color(7201475),this.scene.fog=new f.Fog(7201481,2,20),this.camera.position.set(1,1.5,2.8),this.camera.lookAt(this.scene.position),this.renderer=new f.WebGLRenderer({antialias:!0}),this.renderer.setClearColor("#000000"),this.renderer.setSize(t,n),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,this.renderer.shadowMap.enabled=!0,this.domElement=this.renderer.domElement,this.mount.appendChild(this.domElement),this.camera_pivot=new f.Object3D,this.Y_AXIS=new f.Vector3(0,1,0),this.scene.add(this.camera_pivot),this.camera_pivot.add(this.camera),this.camera.lookAt(this.camera_pivot.position);var a=new f.Mesh(new f.PlaneBufferGeometry(40,40),new f.MeshPhongMaterial({color:7201475}));a.rotation.x=-Math.PI/2,a.position.y=-.5,this.scene.add(a),a.receiveShadow=!0,this.scene.add(new f.HemisphereLight(4469555,1118498)),this.addShadowedLight(1,1,1,16777215,1.35),this.addShadowedLight(.5,1,-1,10066329,1);var i=w()(f);this.intersectMeshes=[],this.loader=new i,Object.keys(k).forEach(function(t){e.loadStl(t,k[t])}),this.addEventListeners()}},{key:"addEventListeners",value:function(){var e={passive:!0};this.domElement.addEventListener("mousedown",this.onMouseDown,!1),this.domElement.addEventListener("mouseup",this.onMouseUp,!1),this.domElement.addEventListener("touchstart",this.onActionStart,e),this.domElement.addEventListener("touchmove",this.onActionMove,e),this.domElement.addEventListener("touchend",this.onActionEnd,e),l(this.onWindowResize)}},{key:"removeEventListeners",value:function(){this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("mouseup",this.onMouseUp,!1),this.domElement.removeEventListener("touchstart",this.onActionStart,!1),this.domElement.removeEventListener("touchmove",this.onActionMove,!1),this.domElement.removeEventListener("touchend",this.onActionEnd,!1)}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"loadStl",value:function(e,t){var n=this,a=t.y||.5,i=t.rotationY||0;this.loader.load(t.stl,function(o){o.applyMatrix((new f.Matrix4).makeTranslation(0,10,0));var s=new f.Mesh(o,t.material);if(s.position.set(0,a,0),s.scale.set(.01,.01,.01),s.rotation.set(0,i,0),s.castShadow=!0,s.receiveShadow=!0,s.callback=function(){n.selectElement(e)},n.scene.add(s),t.isEditable){var r=new f.MeshPhongMaterial({color:16777215,opacity:0,transparent:!0}),c=new f.Mesh(o,r);c.position.set(0,a,0),c.scale.set(.01,.01,.01),c.rotation.set(0,i,0),t.selectMaterial=r,t.mesh=s,t.selectMesh=c,n.scene.add(c)}n.intersectMeshes.push(s),n.renderScene()})}},{key:"addShadowedLight",value:function(e,t,n,a,i){var o=new f.DirectionalLight(a,i);o.position.set(e,t,n),this.scene.add(o),o.castShadow=!0;o.shadow.camera.left=-1,o.shadow.camera.right=1,o.shadow.camera.top=1,o.shadow.camera.bottom=-1,o.shadow.camera.near=1,o.shadow.camera.far=4,o.shadow.mapSize.width=1024,o.shadow.mapSize.height=1024,o.shadow.bias=-.002}},{key:"selectElement",value:function(e){var t=k[e];t.isEditable?(this.setState({selectedElementId:e,selectedColour:t.colour,isColourSelectorVisible:!0}),this.flashSelectedElement()):this.disableColourSelector()}},{key:"animateFlash",value:function(e){var t=this,n=this.state.selectedElementId,a=performance.now()-e,i=1-.0025*a,o=k[n];o.selectMaterial.opacity=i,a<400?window.requestAnimationFrame(function(){t.animateFlash(e)}):o.selectMaterial.opacity=0,this.renderScene()}},{key:"flashSelectedElement",value:function(){var e=this.state.selectedElementId;k[e].selectMaterial.opacity=1,this.animateFlash(performance.now())}},{key:"setColour",value:function(e){var t=this.state.selectedElementId,n=k[t];n.colour=e,n.material.color.setHex(O[e]),this.setState({selectedColour:e}),this.renderScene()}},{key:"onMouseDown",value:function(e){this.onActionStart(e),this.domElement.addEventListener("mousemove",this.onActionMove,!1)}},{key:"onActionMove",value:function(e){var t=this;this.state.isMoved||this.setState({isMoved:!0}),this.isTicking||(this.isTicking=!0,window.requestAnimationFrame(function(){var n;void 0!==e.clientX?n=e.pageX:void 0!==e.changedTouches[0]&&(n=e.changedTouches[0].pageX),t.camera_pivot.rotateY((t.mouseX-n)*(2*Math.PI)/t.width),t.mouseX=n,t.renderScene()}))}},{key:"onMouseUp",value:function(e){this.domElement.removeEventListener("mousemove",this.onActionMove,!1),this.onActionEnd(e)}},{key:"onActionStart",value:function(e){this.setState({isMoved:!1}),void 0!==e.clientX?this.mouseX=e.pageX:void 0!==e.changedTouches[0]&&(this.mouseX=e.changedTouches[0].pageX)}},{key:"onActionEnd",value:function(e){this.state.isMoved||this.detectIntersect(e)}},{key:"disableColourSelector",value:function(){this.setState({isColourSelectorVisible:!1,selectedColour:null,selectedElementId:null})}},{key:"detectIntersect",value:function(e){if(!this.state.isMoved){var t=new f.Raycaster,n=new f.Vector2;void 0!==e.clientX?(n.x=(e.pageX-this.left)/this.width*2-1,n.y=-(e.pageY-this.top)/this.height*2+1):void 0!==e.changedTouches[0]&&(n.x=(e.changedTouches[0].pageX-this.left)/this.width*2-1,n.y=-(e.changedTouches[0].pageY-this.top)/this.height*2+1),t.setFromCamera(n,this.camera);var a=t.intersectObjects(this.intersectMeshes);a.length>0?a[0].object.callback():this.disableColourSelector()}}},{key:"onWindowResize",value:function(){var e=this.mount.clientWidth,t=this.mount.clientHeight;this.top=this.mount.offsetTop,this.left=this.mount.offsetLeft,this.height=t,this.width=e,this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.renderScene()}},{key:"onAnimateHandle",value:function(){var e=this.state,t=e.isAnimatingHandles,n=e.isHandlesOpen;t||(this.animateHandle(performance.now(),n),this.setState({isAnimatingHandles:!0,isHandlesOpen:!n}))}},{key:"animateHandle",value:function(e,t){var n=this,a=performance.now()-e,i=70/300*a;i=t?(i=70-i)<0?0:i:i>70?70:i,k.handle1.mesh.rotation.x=f.Math.degToRad(i),k.handle1.selectMesh.rotation.x=f.Math.degToRad(i),k.handle2.mesh.rotation.x=-f.Math.degToRad(i),k.handle2.selectMesh.rotation.x=-f.Math.degToRad(i),this.renderScene(),a<300?window.requestAnimationFrame(function(){n.animateHandle(e,t)}):this.setState({isAnimatingHandles:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isColourSelectorVisible,a=t.selectedColour;return i.a.createElement("div",{id:"designer",className:"designer",ref:function(t){e.mount=t}},i.a.createElement(j,Object.assign({setColour:this.setColour},{isColourSelectorVisible:n,selectedColour:a})),i.a.createElement(S,{onAnimateHandle:this.onAnimateHandle}))}}]),t}(a.Component)),C=(n(25),n(26),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).top=0,e.height=0,e.range=0,e.state={y:0},e.isTicking=!1,e.onResizeEvent=e.onResizeEvent.bind(Object(g.a)(Object(g.a)(e))),e.fixedParallax=e.fixedParallax.bind(Object(g.a)(Object(g.a)(e))),e.rangeParallax=e.rangeParallax.bind(Object(g.a)(Object(g.a)(e))),e.lockingParallax=e.lockingParallax.bind(Object(g.a)(Object(g.a)(e))),e.scroll=e.scroll.bind(Object(g.a)(Object(g.a)(e))),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"onResizeEvent",value:function(){var e=this.parallax.getBoundingClientRect();this.top=Math.ceil(e.top+window.scrollY),this.height=e.height}},{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.range;switch(this.onResizeEvent(),l(this.onResizeEvent),t){case"fixed":this.parallaxEvent=this.fixedParallax;break;case"range":this.parallaxEvent=this.rangeParallax,this.range=n||400;break;case"locking":this.parallaxEvent=this.lockingParallax;break;default:this.parallaxEvent=this.lockingParallax}window.addEventListener("scroll",this.parallaxEvent,{passive:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.parallaxEvent,!1)}},{key:"scroll",value:function(){var e=this;this.isTicking||(this.isTicking=!0,window.requestAnimationFrame(function(){e.parallaxEvent()}))}},{key:"rangeParallax",value:function(){var e=window.scrollY;(e=e<0?0:e)<this.top+this.height&&e>=this.top-this.height&&this.setState({y:-Math.ceil((this.top-e)/this.height*this.range)}),this.isTicking=!1}},{key:"fixedParallax",value:function(){var e=window.scrollY;(e=e<0?0:e)<this.top+this.height&&e>=this.top-this.height&&this.setState({y:Math.ceil(e-this.top)}),this.isTicking=!1}},{key:"lockingParallax",value:function(){var e=window.scrollY;(e=e<0?0:e)<this.top&&e>=this.top-this.height?this.setState({y:Math.ceil(e-this.top)}):0!==this.state.y&&this.setState({y:0}),this.isTicking=!1}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.state.y;return i.a.createElement("section",{className:"parallax-panel",ref:function(t){e.parallax=t}},i.a.createElement("div",{className:"parallax-panel--container",style:{transform:"translateY(".concat(n,"px)")}},t))}}]),t}(a.Component)),A=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).repositionVideo=e.repositionVideo.bind(Object(g.a)(Object(g.a)(e))),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.repositionVideo(),l(this.repositionVideo)}},{key:"repositionVideo",value:function(){var e=this.hero.clientWidth,t=this.hero.clientHeight,n=t/9*16,a=e/16*9;n<e&&(this.iframe.width=e,this.iframe.height=a,this.iframe.style.top="".concat(-(a-t)/2,"px"),this.iframe.style.left=0),a<t&&(this.iframe.width=n,this.iframe.height=t,this.iframe.style.top=0,this.iframe.style.left="".concat(-(n-e)/2,"px"))}},{key:"render",value:function(){var e=this,t=this.props.src;return i.a.createElement(C,{type:"fixed"},i.a.createElement("div",{className:"hero-video",ref:function(t){e.hero=t}},i.a.createElement("iframe",{className:"hero-video__iframe",title:"hero-video",ref:function(t){e.iframe=t},src:t,allow:"autoplay"})))}}]),t}(a.Component),L=(n(27),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).repositionImage=e.repositionImage.bind(Object(g.a)(Object(g.a)(e))),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){l(this.repositionImage),this.repositionImage()}},{key:"repositionImage",value:function(){var e=this.imageContainer.clientWidth,t=this.imageContainer.clientHeight,n=Math.ceil(t/9*16),a=Math.ceil(e/16*9);n<e&&(this.image.width=e,this.image.height=a,this.image.style.top="".concat(-(a-t)/2,"px"),this.image.style.left=0),a<t&&(this.image.width=n,this.image.height=t,this.image.style.top=0,this.image.style.left="".concat(-(n-e)/2,"px"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.range,o=t.alt,s=t.src;return i.a.createElement(C,{type:n,range:a},i.a.createElement("div",{className:"parallax-image",ref:function(t){e.imageContainer=t}},i.a.createElement("img",{className:"parallax-image--img",src:s,alt:o,ref:function(t){e.image=t}})))}}]),t}(a.Component)),P=n(9),I=n.n(P),N=(n(28),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).createGeoJSONCircle=function(e,t,n){n||(n=64);for(var a,i,o,s=e[1],r=e[0],c=t,l=[],h=c/(111.32*Math.cos(s*Math.PI/180)),d=c/110.574,u=0;u<n;u++)a=u/n*(2*Math.PI),i=h*Math.cos(a),o=d*Math.sin(a),l.push([r+i,s+o]);return l.push(l[0]),{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[l]}}]}}},e.repositionMap=e.repositionMap.bind(Object(g.a)(Object(g.a)(e))),e.getLocation=e.getLocation.bind(Object(g.a)(Object(g.a)(e))),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;l(this.repositionMap),this.repositionMap(),I.a.accessToken="pk.eyJ1IjoiY2hyaXNnd2dyZWVuIiwiYSI6ImNpamlqYmlhNzAwM2d2NW00MTZha3hqMWYifQ.XaIo3tGD3x0ugYZLkMhNQw",this.map=new I.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/light-v9",center:[-.118092,51.509865],zoom:3}),this.map.scrollZoom.disable(),this.map.on("load",function(){return e.getLocation()})}},{key:"renderCircle",value:function(e,t){this.map.addSource("polygon",this.createGeoJSONCircle([e,t],713.64964646111)),this.map.addLayer({id:"polygon",type:"fill",source:"polygon",layout:{},paint:{"fill-color":"blue","fill-opacity":.6}})}},{key:"getLocation",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.map.flyTo({center:[t.coords.longitude,t.coords.latitude]}),e.renderCircle(t.coords.longitude,t.coords.latitude)}):this.map.addSource("polygon",this.createGeoJSONCircle([-.118092,51.509865],713.64964646111))}},{key:"updateMapPosition",value:function(e){console.log(e)}},{key:"repositionMap",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"map",ref:function(t){e.mapContainer=t}})}}]),t}(a.Component)),T=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}()?i.a.createElement(x,null):null;return i.a.createElement("div",{className:"home"},i.a.createElement(A,{src:"https://player.vimeo.com/video/272984380?api=1&background=1&muted=1&loop=1&autoplay=1"}),i.a.createElement("div",{className:"home-container"},"MISSION"),i.a.createElement(L,{type:"range",range:200,src:"./images/light_7.jpg",alt:"Natural Image"}),i.a.createElement("div",{className:"home-container home-container--black"},"The Great Pacific Garbage Patch is the largest accumulation of ocean plastic in the world covering an estimated surface of 1.6 million square kilometers."),i.a.createElement(L,{type:"range",range:200,src:"./images/light_7.jpg",alt:"Natural Image"}),i.a.createElement(N,null),i.a.createElement("div",{className:"home-container home-container--black"}),i.a.createElement(L,{type:"range",range:300,src:"./images/unfolded-blue.png",alt:"Natural Image"}),i.a.createElement("div",{className:"home-container home-container--black"}),e,i.a.createElement(L,{type:"range",range:200,src:"./images/light_7.jpg",alt:"Natural Image"}),i.a.createElement("div",{className:"home-container home-container--black"},"FOOTER"))}}]),t}(a.Component);s.a.render(i.a.createElement(T,null),document.getElementById("root"),function(){window.addEventListener("resize",h,!1)}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[13,1,2]]]);
//# sourceMappingURL=main.c68dce09.chunk.js.map